<!doctype html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="icon" type="image/png" href="/assets/design/favicon.png" />

  <title>Keep PHP up to date on Debian 9 — Dean&#39;s blog</title>
  <meta name="description" content="When installing PHP on Debian 9, the default version is PHP 7.0.This version have been declared End-of-life since January 10, 2019. PHP 7.0 will not go furth...">
  <meta name="author" content="Thomas Durand">
  <meta name="generator" content="Jekyll v4.0.0">

  <meta itemprop="name" content="Keep PHP up to date on Debian 9 — Dean&#39;s blog">
  <meta itemprop="description" content="When installing PHP on Debian 9, the default version is PHP 7.0.This version have been declared End-of-life since January 10, 2019. PHP 7.0 will not go furth...">
  <meta itemprop="image" content="/assets/design/favicon192.png">

  <meta property="og:url" content="https://www.thomasdurand.fr/server/configuration/2019/03/20/keep-php-updated-on-debian-9.html">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Keep PHP up to date on Debian 9 — Dean&#39;s blog">
  <meta property="og:description" content="When installing PHP on Debian 9, the default version is PHP 7.0.This version have been declared End-of-life since January 10, 2019. PHP 7.0 will not go furth...">
  <meta property="og:image" content="/assets/design/favicon192.png">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Keep PHP up to date on Debian 9 — Dean&#39;s blog">
  <meta name="twitter:description" content="When installing PHP on Debian 9, the default version is PHP 7.0.This version have been declared End-of-life since January 10, 2019. PHP 7.0 will not go furth...">
  <meta name="twitter:image" content="/assets/design/favicon192.png">

  <meta name="apple-mobile-web-app-title" content="Dean&#39;s blog">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/design/favicon57.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/design/favicon76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/design/favicon120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/design/favicon152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="/assets/design/favicon167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/design/favicon180.png">
  <link rel="icon" sizes="192x192" href="/assets/design/favicon192.png">
  <link rel="icon" sizes="128x128" href="/assets/design/favicon128.png">

  <link rel="stylesheet" href="/assets/css/style.css?v=201911191051">
  <link rel="canonical" href="https://www.thomasdurand.fr/server/configuration/2019/03/20/keep-php-updated-on-debian-9.html">
  <link type="application/atom+xml" rel="alternate" href="https://www.thomasdurand.fr/feed.xml" title="Dean's blog" />
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">
      <img src="/assets/design/logo@2x.png" height="40" alt="Dean's blog"/>
    </a>

    <nav class="site-nav">
      <a class="page-link" href="/">Stories</a>
      <a class="page-link" href="/about/">About</a>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Keep PHP up to date on Debian 9</h1>
    <p class="post-date"><time datetime="2019-03-20T13:00:00+01:00" itemprop="datePublished">Mar 20, 2019</time> by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Thomas Durand</span></span></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    
    <p>When installing PHP on Debian 9, the default version is <strong>PHP 7.0</strong>.<br />
This version have been declared <em>End-of-life</em> <a href="https://secure.php.net/supported-versions.php">since January 10, 2019</a>. <br />
PHP 7.0 will not go further version <em>7.0.33</em> on Debian 9.</p>
      <h2 id="adding-a-new-repository-for-newer-versions-of-php">
        
        
          <a href="#adding-a-new-repository-for-newer-versions-of-php" class="post-link-anchor"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#u"></use></svg></a> Adding a new repository for newer versions of PHP
        
        
      </h2>

<p>First, this repository uses <em>APT Transport over HTTPS</em>. This is basicly getting packages over a TLS connexion.<br />
Let’s install the necesary packages, if you do not have them already:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get <span class="nb">install </span>ca-certificates apt-transport-https </code></pre></figure>

<p>Then, we add <code class="highlighter-rouge">https://packages.sury.org/php</code> that will be our new source for installing and updating PHP:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">wget <span class="nt">-q</span> https://packages.sury.org/php/apt.gpg <span class="nt">-O-</span> | <span class="nb">sudo </span>apt-key add -
<span class="nb">echo</span> <span class="s2">"deb https://packages.sury.org/php/ stretch main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/php.list</code></pre></figure>
    
      <h2 id="upgrading-php-70-with-patches">
        
        
          <a href="#upgrading-php-70-with-patches" class="post-link-anchor"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#u"></use></svg></a> Upgrading PHP 7.0 with patches
        
        
      </h2>

<p>If you have already <code class="highlighter-rouge">php7.0</code> packages installed on your system, you can get patches right away:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get upgrade</code></pre></figure>

<p>Now the installed version of PHP is (at the time of writing) <code class="highlighter-rouge">v7.0.33-5+0~20190309015553.9</code>.<br />
It contains some patchs from higher version of PHP, added by the community.</p>

<p>This gives you extra time to update your code and support higher version of PHP before upgrading.</p>
    
      <h2 id="upgrade-php">
        
        
          <a href="#upgrade-php" class="post-link-anchor"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#u"></use></svg></a> Upgrade PHP
        
        
      </h2>

<p>You may want to update PHP to a later release, after you’ve made sure your code can support it!</p>

<p>You have 2 options: installing the lastest release (7.3 when this was written), or installing a specific version (7.1 or 7.2).
You can also perform both, if you need more than one version installed.</p>

<p>Those operations will not uninstall other version of PHP, and will not change Apache and/or Nginx configuration, so your websites will still use 7.0 by default.</p>
    
      <h3 id="a-install-phps-latest-version">
        
        
          <a href="#a-install-phps-latest-version" class="post-link-anchor"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#u"></use></svg></a> a) Install PHP’s latest version
        
        
      </h3>

<p>You can now install the <strong>current version</strong> of PHP (as of today, the 7.3) using:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get <span class="nb">install </span>php php-cli php-fpm php-mysql</code></pre></figure>

<p>If the package is already installed, you may need to run instead:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get dist-upgrade</code></pre></figure>
    
      <h3 id="b-install-php-7x">
        
        
          <a href="#b-install-php-7x" class="post-link-anchor"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#u"></use></svg></a> b) Install PHP 7.x
        
        
      </h3>

<p>You may want to install any version of PHP using any of the following commands:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># PHP 7.1</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>php7.1 php7.1-cli php7.1-fpm php7.1-mysql

<span class="c"># PHP 7.2</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>php7.2 php7.2-cli php7.2-fpm php7.2-mysql</code></pre></figure>

<p>You’re free to install any additional extensions that fit your needs.</p>
    
      <h2 id="update-your-http-server">
        
        
          <a href="#update-your-http-server" class="post-link-anchor"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#u"></use></svg></a> Update your HTTP server
        
        
      </h2>

<p>In order to your server to use the new version of PHP, you have to update its configuration.</p>
    
      <h3 id="a-apache2">
        
        
          <a href="#a-apache2" class="post-link-anchor"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#u"></use></svg></a> a) Apache2
        
        
      </h3>

<p>On Apache, you need to disable the old PHP handler before using the new.<br />
More advanced configurations will allow you to use different versions of PHP on differents websites if needed.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>a2dismod php7.0
<span class="nb">sudo </span>a2enmod php7.3 <span class="c"># Adapt the version of PHP with the version you want to use</span>
<span class="nb">sudo </span>service apache2 restart</code></pre></figure>
    
      <h3 id="b-nginx">
        
        
          <a href="#b-nginx" class="post-link-anchor"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#u"></use></svg></a> b) Nginx
        
        
      </h3>

<p>With Nginx, you just need to edit your fastcgi configuration to make usage of the fpm version you need:</p>

<p>By default, those settings are in nginx.conf, but they may be inside a <code class="highlighter-rouge">sites-availables/</code> subfolder, or in a included custom configuration file.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>nano /etc/nginx/nginx.conf</code></pre></figure>

<p>Update the <code class="highlighter-rouge">fastcgi_pass</code> value according to the PHP version you’d like to use.</p>

<p>Then, simply restart nginx:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>service nginx restart</code></pre></figure>
    
      <h2 id="optional-uninstall-php-70">
        
        
          <a href="#optional-uninstall-php-70" class="post-link-anchor"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#u"></use></svg></a> Optional: uninstall PHP 7.0
        
        
      </h2>

<p>If you don’t need it anymore, it can be nice to perform some cleanup operations and remove PHP 7.0 from your server.</p>

<p><strong>Be carefull not to delete package that you still need by reviewing them before confirming!</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>apt-get purge <span class="s2">"php7.0*"</span></code></pre></figure>

<p>If the list seems okay, you may confirm the deletion, and now PHP 7.0 is completely gone!</p>
  </div>

</article>

<hr>

<div class="edit-section">
    <h3><a href="https://github.com/Dean151/Dean-Blog/edit/master/_posts/2019-03-20-keep-php-updated-on-debian-9.md" rel="nofollow" target="_blank" title="Edit on GitHub">Edit</a> or share this story:</h3>
    <ul>
        <li class="t">
            <a rel="nofollow" target="_blank" title="Share this story" href="https://twitter.com/intent/tweet?text=Keep+PHP+up+to+date+on+Debian+9&amp;url=https%3A%2F%2Fwww.thomasdurand.fr%2Fserver%2Fconfiguration%2F2019%2F03%2F20%2Fkeep-php-updated-on-debian-9.html&amp;via=deanatoire&amp;related=deanatoire">
                <svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#t"></use></svg>
            </a>
        </li>
        <li class="f">
            <a rel="nofollow" target="_blank" title="Share this story" href="https://facebook.com/sharer.php?u=https%3A%2F%2Fwww.thomasdurand.fr%2Fserver%2Fconfiguration%2F2019%2F03%2F20%2Fkeep-php-updated-on-debian-9.html">
                <svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#f"></use></svg>
            </a>
        </li>
        <li class="l">
            <a rel="nofollow" target="_blank" title="Share this story" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fwww.thomasdurand.fr%2Fserver%2Fconfiguration%2F2019%2F03%2F20%2Fkeep-php-updated-on-debian-9.html&amp;title=Keep+PHP+up+to+date+on+Debian+9&amp;summary=When+installing+PHP+on+Debian+9%2C+the+default+version+is+PHP+7.0.This+version+have+been+declared+End-of-life+since+January+10%2C+2019.+PHP+7.0+will+not+go+furth...&amp;source=https%3A%2F%2Fwww.thomasdurand.fr">
                <svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#l"></use></svg>
            </a>
        </li>
    </ul>
</div>


      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <img src="/assets/design/dean.jpg" class="profile-picture" alt="Profile picture">
        <h2 class="footer-heading">Thomas Durand (a.k.a. Dean)</h2>
        <ul class="description-list">
            <li>Software architect, code owner and security engineer at <a href="https://www.dilitrust.com/" target="_blank">DiliTrust</a> in Paris.</li>
            <li>Co-creator of a french amateur audiodrama, <a href="https://www.cafelembas.com/" target="_blank">Café & Lembas</a>.</li>
            <li>iOS and web developer, keen photographer, currently in love with <a href="https://swift.org/">Swift</a>.</li>
        </ul>
      </div>
      
      <div class="footer-col footer-col-2">
        <ul class="contact-list">
          <li>
              <a href="https://twitter.com/deanatoire" title="deanatoire" target="_blank" rel="nofollow"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#t"></use></svg>deanatoire</a>
          </li>
          <li>
              <a href="https://github.com/dean151" title="dean151" target="_blank" rel="nofollow"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#g"></use></svg>dean151</a>
          </li>
          <li>
              <a href="https://stackoverflow.com/users/2199197" title="dean" target="_blank" rel="nofollow"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#s"></use></svg>dean</a>
          </li>
          <li>
              <a href="https://www.linkedin.com/in/thomasdurandverjat" title="thomasdurandverjat" target="_blank" rel="nofollow"><svg class="svg-icon" viewBox="0 0 16 16"><use xlink:href="/assets/design/icons.svg#l"></use></svg>thomasdurandverjat</a>
          </li></ul>
      </div>
    </div>

  </div>

</footer>

<script src="/assets/js/scripts.js?v=201911191051"></script>

<script>
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    _paq.push(['setTrackerUrl', '/p/']);
    _paq.push(['setSiteId', '14']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.defer=true; g.src='/p/'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="/p/?idsite=14&rec=1" style="border:0;" alt="" /></p></noscript>



  </body>

</html>
